<!DOCTYPE html>

<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>RFC 7098 - Using the IPv6 Flow Label for Load Balancing in Server Farms 日本語訳</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="https://tex2e.github.io/rfc-translater/favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>

  <script>
    var host = window.location.hostname;
    if (host != "localhost") {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-75892425-1', 'auto');
      ga('send', 'pageview');
    }
  </script>

</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC Trans</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="privacy-policy.html">Privacy Policy</a>
        <a class="nav-item nav-link" href="contact.html">Contact</a>
      </div>
      <div class="navbar-nav ml-auto">
        <span class="navbar-text"><small>@tex2e</small></span>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">7098</span>
  <div style="height: 1ex;"></div>
  <div class="container">
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h4 class="alert-heading">RFC 7098 - Using the IPv6 Flow Label for Load Balancing in Server Farms 日本語訳</h4>
          <span class="URL">URL :
            <a href="https://tools.ietf.org/html/rfc7098">
              https://tools.ietf.org/html/rfc7098
            </a>
          </span><br>
          <span class="title_ja">
            タイトル : <strong>RFC 7098 - サーバーファームでの負荷分散のためのIPv6フローラベルを使用します</strong></span><br>
          <span class="updated_by">翻訳編集 : 自動生成</span><br>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                      B. Carpenter
Request for Comments: 7098                             Univ. of Auckland
Category: Informational                                         S. Jiang
ISSN: 2070-1721                             Huawei Technologies Co., Ltd
                                                              W. Tarreau
                                              HAProxy Technologies, Inc.
                                                            January 2014
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Using the IPv6 Flow Label for Load Balancing in Server Farms
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
抽象
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes how the currently specified IPv6 flow label can be used to enhance layer 3/4 (L3/4) load distribution and balancing for large server farms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この文書は、現在指定されたIPv6フローラベルは、大規模なサーバファームのレイヤ3/4（L3 / 4）負荷分散とのバランスを向上させるために使用できる方法を説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
このメモのステータス
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is not an Internet Standards Track specification; it is published for informational purposes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントはインターネット標準化過程仕様ではありません。それは、情報提供の目的のために公開されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Not all documents approved by the IESG are a candidate for any level of Internet Standard; see Section 2 of RFC 5741.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントはインターネットエンジニアリングタスクフォース（IETF）の製品です。これは、IETFコミュニティの総意を表しています。これは、公開レビューを受けており、インターネットエンジニアリング運営グループ（IESG）によって公表のために承認されています。 IESGによって承認されていないすべての文書がインターネットStandardのどんなレベルの候補です。 RFC 5741のセクション2を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc7098.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントの現在の状態、任意の正誤表、そしてどのようにフィードバックを提供するための情報がhttp://www.rfc-editor.org/info/rfc7098で取得することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Copyright Notice
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
著作権表示
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (c) 2014 IETF Trust and the persons identified as the document authors. All rights reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
著作権（C）2014 IETF信託とドキュメントの作成者として特定の人物。全著作権所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to BCP 78 and the IETF Trust&#39;s Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この文書では、BCP 78と、この文書の発行日に有効なIETFドキュメント（http://trustee.ietf.org/license-info）に関連IETFトラストの法律の規定に従うものとします。彼らは、この文書に関してあなたの権利と制限を説明するように、慎重にこれらの文書を確認してください。コードコンポーネントは、トラスト法規定のセクションで説明4.eおよび簡体BSDライセンスで説明したように、保証なしで提供されているよう簡体BSDライセンスのテキストを含める必要があり、この文書から抽出されました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目次
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Summary of Flow Label Specification . . . . . . . . . . . . .   2
   3.  Summary of Server Farm Load-Balancing Techniques  . . . . . .   4
   4.  Applying the Flow Label to Layer 3/4 Load Balancing . . . . .   8
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  10
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  11
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  12
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  12
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  12
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Introduction
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.はじめに
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IPv6 flow label has been redefined [RFC6437] and is now a recommended IPv6 node requirement [RFC6434]. Its use for load sharing in multipath routing has been specified [RFC6438]. Another scenario in which the flow label could be used is in load distribution for large server farms. Load distribution is a slightly more general term than load balancing, but the latter is more commonly used. In the context of a server farm, both terms refer to mechanisms that distribute the workload of a server farm among different servers in order to optimize performance. Server load balancing commonly applies to HTTP traffic, but most of the techniques described would apply to other upper-layer applications as well. This document starts with brief introductions to the flow label and to server load-balancing techniques, and then describes how the flow label can be used to enhance load balancers operating on IP packets and TCP sessions, commonly known as layer 3/4 load balancers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPv6フローラベルは、[RFC6437]を再定義し、現在推奨されるIPv6ノード要件[RFC6434]でされています。マルチパスルーティングにおける負荷分散のためのその使用は[RFC6438]を指定されています。フローラベルを使用することができたで別のシナリオは、大規模なサーバーファームの負荷分散です。負荷分散は、負荷分散よりもわずかにより一般的な用語であるが、後者の方が一般的に使用されます。サーバファームの文脈では、両方の用語は、性能を最適化するために、異なるサーバ間でのサーバファームの負荷を分散機構を指します。サーバーの負荷分散は、一般的にHTTPトラフィックに適用されますが、記載されている技術のほとんどは、他の上位層のアプリケーションに適用されます。この文書では、フローラベルへとサーバロードバランシング技術を簡単に紹介して始まり、その後、フローラベルは、一般的にレイヤ3/4ロードバランサとして知られているIPパケットとTCPセッション上で動作ロードバランサを強化するために使用することができる方法を説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The motivation for this approach is to improve the performance of most types of layer 3/4 load balancers, especially for traffic including multiple IPv6 extension headers and in particular for fragmented packets. Fragmented packets, often the result of customers reaching the load balancer via a VPN with a limited MTU, are a common performance problem.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このアプローチの動機は、断片化されたパケットのための複数のIPv6拡張ヘッダ特に含む特にトラフィックのレイヤ3/4ロードバランサ、ほとんどの種類のパフォーマンスを改善することです。断片化されたパケット、限られたMTUを持つVPNを経由して、ロードバランサに到達し、顧客の多くの場合、結果は、一般的なパフォーマンスの問題です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. Summary of Flow Label Specification
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
フローラベル仕様の2の概要
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IPv6 flow label [RFC6437] is a 20-bit field included in every IPv6 header [RFC2460]. It is recommended to be supported in all IPv6 nodes by [RFC6434]. There is additional background material in [RFC6436] and [RFC6294]. According to its definition, the flow label should be set to a constant value for a given traffic flow (such as an HTTP connection), and that value will belong to a uniform statistical distribution, making it potentially valuable for load-balancing purposes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPv6フローラベル[RFC6437]は、すべてのIPv6ヘッダー[RFC2460]に含まれる20ビットのフィールドです。 [RFC6434]ですべてのIPv6ノードでサポートされることをお勧めします。追加の背景資料は、[RFC6436]と[RFC6294]です。その定義によれば、フローラベルは、（HTTP接続などの）所与のトラフィックフローのために一定の値に設定する必要があり、その値は、負荷分散の目的のために、それは潜在的に価値のあるなって、均一な統計的分布に属します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Any device that has access to the IPv6 header has access to the flow label, and it is at a fixed position in every IPv6 packet. In contrast, transport-layer information, such as the port numbers, is not always in a fixed position, since it follows any IPv6 extension headers that may be present. In fact, the logic of finding the transport header is always more complex for IPv6 than for IPv4, due to the absence of an Internet Header Length field in IPv6. Additionally, if packets are fragmented, the flow label will be present in all fragments, but the transport header will only be in one packet. Therefore, within the lifetime of a given transport-layer connection, the flow label can be a more convenient &#34;handle&#34; than the port number for identifying that particular connection.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPv6ヘッダへのアクセスを有する任意のデバイスは、フローラベルへのアクセスを有し、それはすべてのIPv6パケット内の固定位置にあります。そのようなポート番号としては対照的に、トランスポート層の情報は、それが存在し得る任意のIPv6拡張ヘッダの後に続くので、固定位置に限りません。実際には、トランスポート・ヘッダを見つけるロジックは、常により複雑なIPv6のIPv4の場合よりIPv6におけるインターネットヘッダ長フィールドが存在しないことによるものです。パケットが断片化されている場合に加えて、フローラベルはすべての断片に存在するであろうが、トランスポート・ヘッダは、一つのパケットであろう。したがって、所定のトランスポート層接続の存続期間内に、フローラベルは、その特定の接続を識別するためのポート番号よりも便利「ハンドル」とすることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
According to RFC 6437, source hosts should set the flow label; however, if they do not (i.e., its value is zero), forwarding nodes (such as the first-hop router) may set it instead. In both cases, the flow label value must be constant for a given transport session, normally identified by the IPv6 and Transport header 5-tuple. By default, the flow label value should be calculated by a stateless algorithm. The resulting value should form part of a statistically uniform distribution, regardless of which node sets it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 6437によると、ソースホストは、フローラベルを設定する必要があります。そうでない場合は、（すなわち、その値はゼロである）、（このような第1のホップ・ルータとして）転送ノードは、代わりにそれを設定してもよいです。両方の場合において、フローラベル値は、通常のIPv6ヘッダとトランスポート5タプルによって識別され、与えられたトランスポートセッションのために一定でなければなりません。デフォルトでは、フローラベル値はステートレスなアルゴリズムによって計算されなければなりません。得られた値にかかわらず、それを設定するノードの、統計的に均一な分布の一部を形成しなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is recognized that at the time of writing, very few traffic flows include a non-zero flow label value. The mechanism described below is one that can be added to existing load-balancing mechanisms, so that it will become effective as more and more flows contain a non-zero label. Even if the flow label is chosen from an imperfectly uniform distribution, it will nevertheless increase the information entropy of the IPv6 header as a whole. This allows for progressive introduction of load balancing based on the flow label.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
執筆時点では、非常にいくつかのトラフィックフローが非ゼロのフローラベル値を含めることが認識されています。以下に説明するメカニズムは、より多くのフローが非ゼロラベルを含むように、それが有効となるよう、既存のロード・バランシング・メカニズムに加えることができるものです。フローラベルが不完全一様分布から選択された場合でも、それにもかかわらず、全体としてIPv6ヘッダの情報エントロピーを増大させます。これは、フローラベルに基づいて、ロードバランシングの漸進的な導入を可能にします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the recommendations in Section 3 of RFC 6437 are followed for traffic from a given source accessing a well-known TCP port at a given destination, the flow label can act as a substitute for the port numbers as far as a load balancer is concerned, and it can be found at a fixed position in the layer 3 header even if extension headers are present.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 6437のセクション3の推奨事項は、所定の宛先によく知られているTCPポートにアクセスする特定のソースからのトラフィックのために従わされている場合は、フローラベルは限りロードバランサを懸念しているポート番号の代替として機能することができ、拡張ヘッダが存在する場合でも、レイヤ3ヘッダ内の固定位置に見出すことができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The flow label is defined as an end-to-end component of the IPv6 header, but there are three qualifications to this:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
フローラベルは、IPv6ヘッダーのエンドツーエンドの構成要素として定義されるが、この3つの資格があるれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Until the IPv6 flow label specification in RFC 6437 is widely implemented as recommended by RFC 6434, the flow label will often be set to the default value of zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. RFC 6434で推奨されているようにRFC 6437でのIPv6フローラベル仕様が広く実装されるまで、フローラベルは、多くの場合、ゼロのデフォルト値に設定されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. Because of the recommendation to use a stateless algorithm to calculate the label, there is a low (but non-zero) probability that two simultaneous flows from the same source to the same destination have the same flow label value despite having different transport-protocol port numbers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2.ためにラベルを計算するためにステートレスなアルゴリズムを使用するように勧告の、同じソースから同じ宛先への2つの同時フローが異なるtransport-を有するにもかかわらず、同じフローラベル値を有すること低い（しかし非ゼロ）可能性がありますプロトコルのポート番号。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The Flow Label field is in an unprotected part of the IPv6 header, which means that intentional or unintentional changes to its value cannot be easily detected by a receiver.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3.フローラベルフィールドは、その値に意図的又は非意図的変化が容易に受信機によって検出することができないことを意味するIPv6ヘッダの保護されていない部分です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first two points are addressed below in Section 4 and the third in Section 5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初の2点は、第4及び第5の第三以下に対処されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. Summary of Server Farm Load-Balancing Techniques
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
サーバーファームロードバランシングテクニックの3まとめ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Load balancing for server farms is achieved by a variety of methods, often used in combination [Tarreau]. This section gives a general overview of common methods, although the flow label is not relevant to all of them. The actual load-balancing algorithm (the choice of which server to use for a new client session) is irrelevant to this discussion. We give examples for HTTP, but analogous techniques may be used for other application protocols.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
サーバーファームのロードバランシングは、多くの場合、[Tarreau]組み合わせて使用​​される様々な方法によって達成されます。フローラベルは、それらのすべてに関連していないが、このセクションでは、一般的な方法の一般的な概要を説明します。実際のロードバランシングアルゴリズム（新しいクライアントセッションに使用するサーバーの選択は）この議論とは無関係です。我々は、HTTPのための例を与えるが、類似の技術は、他のアプリケーションプロトコルのために使用することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The simplest method is using the DNS to return different server addresses for a single name such as www.example.com to different users. This is typically done by rotating the order in which different addresses within the server site are listed by the relevant authoritative DNS server, on the assumption that the client will pick the first one. Routing may be configured such that the different addresses are handled by different ingress routers. Several variants of this load-balancing mechanism exist, such as expecting some clients to use all the advertised addresses when multiple connections are involved, or directing the traffic to multiple sites, also known as global load balancing. None of these mechanisms are in the scope of this document, and the proposal in this document does not affect their usability nor aim to replace them, so they will not be discussed further.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O最も簡単な方法は、異なるユーザにwww.example.comなどの単一名の異なるサーバーのアドレスを返すようにDNSを使用しています。これは通常、クライアントが最初のものを選択することを前提に、サーバーのサイト内の異なるアドレスが関連する権威DNSサーバによって示されている順序を回転させることによって行われます。ルーティングは異なるアドレスが異なる入口ルータによって処理されるように構成されてもよいです。このロードバランシングメカニズムのいくつかの変異体はまた、グローバル負荷分散として知られている、そのような複数の接続が含まれる場合、すべての広告を出してアドレスを使用する一部のクライアントを期待し、または複数のサイトにトラフィックを向けるように、存在します。これらのメカニズムのいずれもが、この文書の範囲にありませんし、この文書の提案は、その使いやすさに影響を与えたり、それらを交換することを目的としていないので、それらはさらに議論されることはありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Another method, for HTTP servers, is to operate a layer 7 reverse proxy in front of the server farm. The reverse proxy will present a single IP address to the world, communicated to clients by a single AAAA record. For each new client session (an incoming TCP connection and HTTP request), it will pick a particular server and proxy the session to it. The act of proxying should be more efficient and less resource-intensive than the act of serving the required content. The proxy must retain TCP state and proxy state for the duration of the session. This TCP state could, potentially, include the incoming flow label value.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O別の方法は、HTTPサーバ、サーバファームの前に層7リバースプロキシを動作させることです。リバースプロキシは、単一のAAAAレコードがクライアントに伝え、世界に単一のIPアドレスを、紹介します。それぞれの新しいクライアントセッション（着信TCP接続とHTTP要求）の場合は、それに特定のサーバやプロキシセッションを選択します。プロキシの行為が必要なコンテンツを提供するという行為よりも効率的かつ少ないリソースを大量に消費する必要があります。プロキシは、セッションの間TCP状態とプロキシの状態を保持しなければなりません。このTCP状態は、潜在的に、入ってくるフローラベル値を含めることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o A component of some load-balancing systems is an SSL reverse proxy farm. The individual SSL proxies handle all cryptographic aspects and exchange unencrypted HTTP with the actual servers. Thus, from the load-balancing point of view, this really looks just like a server farm, except that it&#39;s specialized for HTTPS. Each proxy will retain SSL and TCP and maybe HTTP state for the duration of the session, and the TCP state could potentially include the flow label.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O一部の負荷分散システムの構成要素は、SSLリバースプロキシファームです。個々のSSLプロキシは、実際のサーバーですべての暗号側面と交流暗号化されていないHTTPを扱います。したがって、ビューのロード・バランシングの点から、これは本当にそれがHTTPSに特化していますことを除いて、単にサーバファームのように見えます。各プロキシは、セッションの間SSLおよびTCPと多分HTTPの状態を保持し、かつTCP状態は、潜在的にフローラベルを含めることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Finally the &#34;front end&#34; of many load-balancing systems is a layer 3/4 load balancer. While it can be a dedicated device, it is also a standard function of some network switches or routers (e.g. using Equal-Cost Multipath Routing (ECMP) [RFC2991]). In this case, it is the layer 3/4 load balancer whose IP address is published as the primary AAAA record for the service. All client sessions will pass through this device. Depending on the specific scenario, the balancer will assign new sessions among the actual application servers, across an SSL proxy farm, or among a set of layer 7 proxies. In all cases, the layer 3/4 load balancer has to classify incoming packets very quickly and choose the target server or proxy so as to ensure persistence. &#39;Persistence&#39; is defined as the guarantee that a given client session will run to completion on a single server. The layer 3/4 load balancer therefore needs to inspect each incoming packet to classify it. There are two common types of layer 3/4 load balancers, the totally stateless ones which only act on single packets, generally involving a per-packet hashing of easy-to-find information such as the source address and/or port into a server number, and the stateful ones that take the routing decision on the very first packets of a session and maintain the same direction for all packets belonging to the same session. Clearly, both types of layer 3/4 balancers could inspect and make use of the flow label value.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O最後に多くの負荷分散システムの「フロントエンドは、」レイヤ3/4ロードバランサです。それは、専用の装置とすることができるが、それは（例えば、等価コストマルチパスルーティング（ECMP）[RFC2991]を使用して）、いくつかのネットワークスイッチまたはルータの標準機能です。この場合、それは、そのIPアドレスサービスの主なAAAAレコードとして公開されている層3/4ロードバランサです。すべてのクライアントセッションは、このデバイスを通過することになります。特定のシナリオに応じて、バランサは、SSLプロキシファーム全体、またはレイヤ7つのプロキシのセットの中で、実際のアプリケーション・サーバー間で新しいセッションを割り当てます。すべての場合において、レイヤ3/4ロードバランサは非常に迅速に着信パケットを分類し、持続性を確保するために、ターゲットサーバまたはプロキシを選択しなければなりません。 「持続性は、」特定のクライアント・セッションは、単一のサーバー上で完了するまで実行されることを保証として定義されます。レイヤ3/4ロードバランサは、したがって、それを分類する各着信パケットを検査する必要があります。一般的に、このような送信元アドレスおよび/またはサーバへのポートとして簡単に見つける情報のパケットごとのハッシュを含む層3/4ロードバランサ、唯一の単一のパケットに作用し、完全にステートレスなもの、の2つの一般的な種類があります。数、およびセッションの最初のパケットのルーティング決定を取り、同じセッションに属するすべてのパケットに対して同じ方向を維持するステートフルなもの。明らかに、層の両方のタイプは3/4バランサは、検査とフローラベル値を利用することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Our focus is on how the balancer identifies a particular flow. For clarity, note that two aspects of layer 3/4 load balancers are not affected by use of the flow label to identify sessions:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
我々の焦点は、バランサは、特定のフローを識別する方法です。明確にするために、層の2つの側面が3/4ロードバランサは、セッションを識別するために、フローラベルの使用によって影響されないことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1. Balancers use various techniques to redirect traffic to a specific target server.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1.バランサは、特定のターゲットサーバへのトラフィックをリダイレクトするために様々な技術を使用しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
          +  All servers are configured with the same IP address, they
             are all on the same LAN, and the load balancer sends
             directly to their individual MAC addresses.  In this case,
             return packets from the server to the client are sent back
             without passing through the balancer, a technique known as
             direct server return, but we are not concerned here with
             the return packets.
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+ All servers are configured with the same IP address, treated locally as an anycast address by layer 3 ECMP routing.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+すべてのサーバは、レイヤ3 ECMPルーティングによってエニーキャストアドレスとしてローカルに処理された同じIPアドレスが設定されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+ Each server has its own IP address, and the balancer uses an IP-in-IP tunnel to reach it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+各サーバは、独自のIPアドレスを持ち、バランサは、それに到達するために、IPインIPトンネルを使用しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+ Each server has its own IP address, and the balancer performs NAPT (Network Address and Port Translation) to deliver the client&#39;s packets to that address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+各サーバは、独自のIPアドレスを持ち、バランサは、そのアドレスに、クライアントのパケットを配信するためにNAPT（ネットワークアドレスとポート変換）を行います。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+ The choice between these methods is not affected by use of the flow label.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
+これらのメソッド間の選択は、フローラベルの使用に影響されません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2. A layer 3/4 balancer must correctly handle Path MTU Discovery by forwarding relevant ICMPv6 packets in both directions. This too is not directly affected by use of the flow label. It should be noted that there may be difficulty correlating an ICMPv6 &#34;Packet too big&#34; response with the session it refers to, but that is out of the scope of the present document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2.レイヤ3/4バランサが正しく両方向に関連のICMPv6パケットを転送することにより、パスMTUディスカバリを処理する必要があります。これは、あまりにも直接フローラベルの使用に影響されません。それが参照するセッションとICMPv6の「パケットが大きすぎる」応答を相関難しさがあるかもしれないことに留意すべきであるが、それは現在のドキュメントの範囲外です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following diagram, inspired by [Tarreau], shows a layout with various methods in use together. (Below, &#34;ASIC&#34; stands for &#34;Application-Specific Integrated Circuit&#34;.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
【Tarreau]に触発以下の図は、一緒に使用されている様々な方法とレイアウトを示しています。 （以下、「ASIC」は、「特定用途向け集積回路」の略です。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
        ___________________________________________
       (                                           )
       (          Clients in the Internet          )
       (___________________________________________)
              |                            |
         ------------ DNS-based      ------------
         | Ingress  | load splitting | Ingress  |
         | router   | affects        | router   |
         ------------ routing        ------------
           ___|____________________________|___
                |                        |
                |                        |
                |                        |
           ------------             ------------
           | L3/4 ASIC|             | L3/4 ASIC|
           | balancer |             | balancer |
           ------------             ------------
                |          load          |
                |        spreading       |
      __________|________________________|___________
          |              |            |          |
    ------------   ------------   --------   --------
    |HTTP proxy|...|HTTP proxy|   | SSL  |...| SSL  |
    | balancer |   | balancer |   | proxy|   | proxy|
    ------------   ------------   --------   --------
      ____|_____________|_____________|_________|_____
        |          |          |          |          |
    --------   --------   --------   --------   --------
    |HTTP  |   |HTTP  |   |HTTP  |   |HTTP  |   |HTTP  |
    |server|   |server|   |server|   |server|   |server|
    --------   --------   --------   --------   --------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
From the previous paragraphs, we can identify several points in this diagram where the flow label might be relevant:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
前の段落から、我々はフローラベルは、関連するかもしれない。この図では、いくつかのポイントを特定することができます：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Layer 3/4 load balancers.
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.レイヤ3/4ロードバランサ。
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. SSL proxies.
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. SSLプロキシ。
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. HTTP proxies.
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. HTTPプロキシ。
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
However, usage by the proxies seems unlikely to affect performance, because they must in any case process the application-layer header, so in this document we focus only on layer 3/4 balancers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
彼らはどのような場合のプロセスでアプリケーション層ヘッダは、この文書に記載されているので、我々は唯一の層3/4バランサに焦点を当てる必要があるので、しかし、プロキシによる使用は、パフォーマンスに影響を与える可能性は低いようです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. Applying the Flow Label to Layer 3/4 Load Balancing
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 3/4負荷分散を層にフローラベルを適用します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The suggested model for using the flow label to enhance an layer 3/4 load-balancing mechanism is as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次のように層3/4負荷分散メカニズムを強化するためにフローラベルを使用するための提案モデルは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o We are only concerned with IPv6 traffic in which the flow label value has been set according to [RFC6437]. If the flow label of an incoming packet is zero, load balancers will continue to use the transport header in the traditional way. As the use of the flow label becomes more prevalent according to RFC 6434, load balancers, and therefore users, will reap a growing performance benefit.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O我々は、フローラベル値は[RFC6437]に応じて設定されたIPv6トラフィックに関するものです。着信パケットのフローラベルがゼロである場合、ロードバランサは、従来の方法で、トランスポート・ヘッダを使用し続けます。フローラベルの使用は、RFC 6434によると、より一般的になるにつれ、ロードバランサ、そのためユーザーは、成長しているパフォーマンス上の利点を享受します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If the flow label of an incoming packet is non-zero, layer 3/4 load balancers can use the 2-tuple {source address, flow label} as the session key for whatever load distribution algorithm they support. Alternatively, they might use the 3-tuple {dest address, source address, flow label}, especially if the server farm supports multiple server IP addresses, but using the 3-tuple will be significantly quicker than searching for the transport port numbers later in the packet. Moreover, the transport-layer information such as the source port is not repeated in fragments, which generally prevents stateless load balancers from supporting fragmented traffic since they generally cannot reassemble fragments.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O着信パケットのフローラベルがゼロで、レイヤ3/4ロードバランサは、サポートどの負荷分散アルゴリズムのためのセッション鍵として2タプル{送信元アドレス、フローラベル}を使用することができる場合。あるいは、それらは、サーバファームは、複数のサーバーのIPアドレスをサポートしているが、3組を使用して後にトランスポートのポート番号を検索するよりも大幅に速くなります場合は特に、3タプル{宛先アドレス、ソースアドレス、フローラベル}を使用するかもしれませんパケット。また、ソースポートなどのトランスポート層の情報は、一般に、それらは、一般的フラグメントを再構成することができないので、断片化されたトラフィックをサポートからステートレスロードバランサを防止フラグメントで繰り返しません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
A stateless layer 3/4 load balancer would simply apply a hash algorithm to the 2-tuple or 3-tuple on all packets in order to select the same target server consistently for a given flow. Needless to say, the hash algorithm has to be well chosen for its purpose, but this problem is common to several forms of stateless load balancing. The discussion in [RFC6438] applies.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ステートレス層3/4ロードバランサは、単に、所与の流れのために一貫して同一のターゲット・サーバーを選択するために、すべてのパケットに2組または3組にハッシュアルゴリズムを適用します。言うまでもなく、ハッシュアルゴリズムはよくその目的のために選択しなければならないが、この問題は、ステートレス負荷分散のいくつかの形に共通しています。 [RFC6438]で議論が適用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
A stateful layer 3/4 load balancer would apply its usual load distribution algorithm to the first packet of a session, and store the {tuple, server} association in a table so that subsequent packets belonging to the same session are forwarded to the same server. Thus, for all subsequent packets of the session, it can ignore all IPv6 extension headers, which should lead to a performance benefit. Whether this benefit is valuable will depend on engineering details of the specific load balancer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ステートフルレイヤ3/4ロードバランサは、セッションの最初のパケットにその通常の負荷分散アルゴリズムを適用し、同じセッションに属する後続のパケットが同じサーバに転送されるように、テーブル内のタプル{、}サーバアソシエーションを格納することになります。このように、セッションの後続のすべてのパケットのために、それはパフォーマンス上の利点につながるはずすべてのIPv6拡張ヘッダを無視することができます。この利点は貴重であるかどうかは、具体的なロードバランサの技術の詳細に依存します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Note that such a balancer will not identify new transport sessions from the same source that use the same flow label; they will be delivered to the same server. This is like the behavior of existing hash-based layer 4 balancers that always send similarly hashed packets to the same destination. However, a global state table in a flow label balancer cannot be shared between multiple services if these services rely on transport-layer information, since the goal of using the flow label is to avoid looking up that information.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
このようバランサは同じフローラベルを使用して、同じソースからの新しいトランスポートセッションを識別しないことに注意してください。彼らは、同じサーバーに配信されます。これは、常に同じ宛先に同様にハッシュされたパケットを送信し、既存のハッシュベース層4バランサの挙動と同様です。これらのサービスは、トランスポート層の情報に依存している場合にはフローラベルを使用しての目的は、その情報を検索避けるためですので、フローラベルバランサのグローバル状態テーブルは、複数のサービス間で共有することはできません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
A related issue is that the balancer will not detect FIN/ACK sequences at the end of sessions. Therefore, it will rely on inactivity timers to delete session state. However, all existing balancers must maintain such timers to deal with hung sessions, and the practical impact on memory utilization is unlikely to be significant.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
関連する問題は、バランサは、セッションの最後にFIN / ACKシーケンスを検出していないということです。したがって、セッション状態を削除するには、非アクティブタイマーに依存しています。しかし、既存のすべてのバランサは、ハングしたセッションに対処するために、このようなタイマを維持しなければならない、とメモリ使用率に実用的な影響は重要になることはほとんどありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Layer 3/4 balancers that redirect the incoming packets by NAPT are not expected to obtain any saving of time by using the flow label, because they have no choice but to follow the extension header chain in order to locate and modify the port number and transport checksum. The same would apply to balancers that perform TCP state tracking for any reason.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
彼らは、ポート番号を見つけて修正するために、拡張ヘッダーのチェーンをたどるしかないので、O NAPTによって着信パケットをリダイレクトするレイヤ3/4バランサは、フローラベルを使用することにより、任意の時間の節約を得ることが期待されていないと輸送チェックサム。同じことは、何らかの理由でTCPステートトラッキングを行うバランサに適用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Note that correct handling of ICMPv6 for Path MTU Discovery requires the layer 3/4 balancer to keep state for the client source address, independently of either the port numbers or the flow label.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
OパスMTUディスカバリのためのICMPv6の正しい取り扱いは、ポート番号やフローラベルのいずれかとは無関係に、クライアントの送信元アドレスの状態を維持するためにレイヤ3/4バランサを必要とします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SSL and HTTP proxies, if present, should forward the flow label value towards the server. This usually has no performance benefit, but it is consistent with the general model for the flow label described in RFC 6437.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
O SSLおよびHTTPプロキシは、存在する場合、サーバーへのフローラベル値を転送する必要があります。これは、通常はパフォーマンス上の利点を持っていませんが、それはRFC 6437で説明したフローラベルのための一般的なモデルと一致しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It should be noted that the performance benefit, if any, depends entirely on engineering trade-offs in the design of the layer 3/4 balancer. An extra test is needed to check if the label is non-zero, but if there is a non-zero label, all logic for handling extension headers can be skipped except for the first packet of a new flow. Since the identifying state to be stored is only the tuple and the server identifier, storage requirements will be reduced. Additionally, the method will work for fragmented traffic and for flows where the transport information is missing (unknown transport protocol) or obfuscated (e.g., IPsec). Traffic reaching the load balancer via a VPN is particularly prone to the fragmentation issue, due to MTU size issues. For some load-balancer designs, these are very significant advantages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
パフォーマンス上の利点は、もしあれば、レイヤ3/4バランサの設計におけるエンジニアリングのトレードオフに完全に依存ことに留意すべきです。余分なテストは、ラベルが非ゼロであるかどうかを確認するために必要とされるが、非ゼロのラベルがある場合は、拡張ヘッダを処理するためのすべてのロジックは、新しいフローの最初のパケットを除き、スキップすることができます。格納されるべき特定の状態のみタプルとサーバ識別子であるため、ストレージ要件が低減されます。さらに、この方法は、断片化されたトラフィックのためのトランスポート情報は、（未知のトランスポートプロトコル）存在しないか、難読化されている（例えば、IPsec）の流れのために働くだろう。 VPN経由でロードバランサに到達したトラフィックは、MTUサイズの問題に起因する断片化の問題、特に傾向があります。一部のロードバランサの設計では、これらは非常に重要な利点があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the unlikely event of two simultaneous flows from the same source address having the same flow label value, the two flows would end up assigned to the same server, where they would be distinguished as normal by their port numbers. There are approximately one million possible flow label values, and if the rules for flow label generation [RFC6437] are followed, this would be a statistically rare
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
同じフローラベル値を持つ同じ送信元アドレスからの2つの同時フローの万一、二つの流れは、彼らが自分のポート番号で、通常のように区別されるのと同じサーバーに割り当てられてしまうでしょう。そこ約100万の可能なフローラベル値であり、フローラベル生成[RFC6437]のための規則が守られている場合、これは統計的にまれだろう
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
event, and would not damage the overall load-balancing effect. Moreover, with a million possible label values, it is very likely that there will be many more flow label values than servers at most sites, so it is already expected that multiple flow label values will end up on the same server for a given client IP address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イベント、および全体的な負荷分散の効果を損傷しないでしょう。また、百万の可能なラベル値と、ほとんどのサイトでのサーバーよりも多くのフローラベル値が存在することになる可能性が非常に高いので、それはすでに、複数のフローラベルの値が与えられたクライアントIPのために、同じサーバー上に終わることが期待されます住所。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the case that many thousands of clients are hidden behind the same large-scale NAPT with a single shared IP address, the assumption of low probability of conflicts might become incorrect, unless flow label values are random enough to avoid following similar sequences for all clients. This is not expected to be a factor for IPv6 anyway, since there is no need to implement large-scale NAPT with address sharing [RFC4864]. The probability of conflicts is low for sites that implement network prefix translation [RFC6296], since this technique provides a different address for each client.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
フローラベルの値は、すべてのクライアントのための同様の配列に続く回避するのに十分なランダムでない限り、クライアントの何千もの単一の共有IPアドレスと同じ大規模なNAPTの後ろに隠されている場合には、紛争の低い確率の仮定は、間違ったになるかもしれません。アドレス共有[RFC4864]で大規模NAPTを実装する必要がないので、これは、とにかくIPv6のための因子であることが期待されていません。この技術は、クライアントごとに異なるアドレスを提供するため、競合の確率は、ネットワークプレフィックス翻訳[RFC6296]を実装するサイトの低いです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.セキュリティについての考慮事項
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Security aspects of the flow label are discussed in [RFC6437]. As noted there, a malicious source or man-in-the-middle could disturb load balancing by manipulating flow labels. This risk already exists today where the source address and port are used as a hashing key in layer 3/4 load balancers, as well as where a persistence cookie is used in HTTP to designate a server. It even exists on layer 3 components that only rely on the source address to select a destination, making them more DDoS-prone. Nevertheless, all these methods are currently used because the benefits for load balancing and persistence hugely outweigh the risks. The flow label does not significantly alter this situation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
フローラベルのセキュリティの側面は、[RFC6437]で議論されています。そこに述べたように、悪意のあるソースまたはman-in-the-middleは、フローラベルを操作することにより、負荷分散を妨害することができます。このリスクは、既に送信元アドレスとポートは、レイヤ3/4ロードバランサでのハッシュキーとして使用されている場合、今日存在しているだけでなく、永続クッキーは、サーバを指定するためにHTTPで使用されます。それも、それらよりDDoS攻撃が発生しやすい作り、層の上にのみ送信先を選択するために、送信元アドレスに依存している3つのコンポーネントが存在します。負荷分散と永続化のための利点は非常リスクを上回るので、それにもかかわらず、全てのこれらの方法では、現在使用されています。フローラベルは大幅にこの状況を変えることはありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Specifically, the IPv6 flow label specification [RFC6437] states that &#34;stateless classifiers should not use the flow label alone to control load distribution, and stateful classifiers should include explicit methods to detect and ignore suspect flow label values.&#34; The former point is answered by also using the source address. The latter point is more complex. If the risk is considered serious, the site ingress router or the layer 3/4 balancer should use a suitable heuristic to verify incoming flows with non-zero flow label values. If a flow from a given source address and port number does not have a constant flow label value, it is suspect and should be dropped. This would deal with both intentional and accidental changes to the flow label.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
具体的には、IPv6のフローラベル仕様[RFC6437]は、「ステートレス分類は、負荷分散を制御するために、単独でフローラベルを使用しないでください、そしてステートフル分類は、疑わしいフローラベル値を検出して無視する明示的な方法が含まれるべきである。」と述べていますかつてのポイントは、送信元アドレスを使用して答えています。後者の点は、より複雑です。リスクが深刻とみなされた場合は、サイトの入口ルータやレイヤ3/4バランサが非ゼロのフローラベル値の着信フローを確認するために、適切なヒューリスティックを使用する必要があります。特定の送信元アドレスとポート番号からのフローが一定のフローラベル値を持っていない場合、それは疑わしいとドロップする必要があります。これは、フローラベルへの意図的および偶発変化の両方を扱うでしょう。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A malicious source or man-in-the-middle could generate a flow in which the flow label is constant but the transport port numbers in some packets are invalid. Such packets, if load-balanced only on the basis of the flow label, could reach the target server and create a single-source DoS attack on its TCP engine.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
悪質なソースまたはman-in-the-middleは、フローラベルが一定であるが、いくつかのパケット内のトランスポートのポート番号が無効である、流れを生成することができます。このようなパケットは、負荷バランス場合にのみ、フローラベルに基づいて、ターゲットサーバに到達し、そのTCPエンジン上の単一ソースDoS攻撃を作成することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 6437 notes in its Security Considerations that if the covert channel risk is considered significant, a firewall might rewrite non-zero flow labels. As long as this is done as described in RFC 6437, it will not invalidate the mechanisms described above.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
そのセキュリティの考慮でRFC 6437のノート隠れチャネルリスクが有意であると考えられる場合、ファイアウォールは非ゼロフローラベルを書き換える可能性があること。限り、RFC 6437に記載されているように、これが行われているように、それは、上述のメカニズムを無効にしないであろう。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The flow label may be of use in protecting against DDoS attacks against servers. As noted in RFC 6437, a source should generate flow label values that are hard to predict, most likely by including a secret nonce in the hash used to generate each label. The attacker does not know the nonce and therefore has no way to invent flow labels that will all target the same server, even with knowledge of both the hash algorithm and the load-balancing algorithm. Still, it is important to understand that it is always trivial to force a load balancer to stick to the same server during an attack, so the security of the whole solution must not rely on the unpredictability of the flow label values alone, but should include defensive measures like most load balancers already have against abnormal use of source addresses or session cookies.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
フローラベルは、サーバに対するDDoS攻撃からの保護にも使用することができます。 RFC 6437で述べたように、ソースは、各ラベルを生成するために使用されるハッシュにおける秘密nonceを含むである可能性が最も高く、予測することが困難なフローラベル値を生成する必要があります。攻撃者は、nonceを知っているため、すべてのも、ハッシュアルゴリズムや、ロード・バランシング・アルゴリズムの両方の知識を持って、同じサーバーをターゲットとしますフローラベルを発明する方法を持っていません。それでも、攻撃中に、同じサーバーに固執するロードバランサを強制的に常に些細であることを理解することが重要であるので、ソリューション全体のセキュリティだけではフローラベル値の予測不可能性に依存しない必要がありますが、含める必要がありますほとんどのロードバランサなどの防衛策は、すでに送信元アドレスまたはセッションクッキーの異常な使用に対して持っています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
New flows are assigned to a server according to any of the usual algorithms available on the load balancer (e.g., least connections, round robin, etc.). The association between the 2-tuple {source address, flow label} and the server is stored in a table (often called stick table) so that future traffic from the same source using the same flow label can be sent to the same server. This method is more robust against a loss of server and also makes it harder for an attacker to target a specific server, because the association between a flow label value and a server is not known externally.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいフローは、ロードバランサ（例えば、最小接続、ラウンドロビンなど）で利用可能な通常のアルゴリズムのいずれかに記載のサーバに割り当てられています。同じフローラベルを使用して、同じソースからの将来のトラフィックを同じサーバーに送信することができるように、2タプル{送信元アドレス、フローラベル}とサーバとの間の関連付けは、テーブル（しばしば呼ばれるスティックテーブル）に格納されています。このメソッドは、サーバーの損失に対してより堅牢であり、また、フローラベル値とサーバの間の関連付けは外部から知られていないため、特定のサーバーを対象とする攻撃者のためにそれが難しくなります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the case that a stateless hash function is used to assign client packets to specific servers, it may be advisable to use a cryptographic hash function of some kind, to ensure that an attacker cannot predict the behavior of the load balancer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ステートレスハッシュ関数は、特定のサーバにクライアントパケットを割り当てるために使用された場合は、攻撃者は、ロードバランサの挙動を予測することはできませんことを保証するために、いくつかの種類の暗号化ハッシュ関数を使用することが推奨されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. Acknowledgements
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.謝辞
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Valuable comments and contributions were made by Fred Baker, Olivier Bonaventure, Ben Campbell, Lorenzo Colitti, Linda Dunbar, Donald Eastlake, Joel Jaeggli, Gurudeep Kamat, Warren Kumari, Julia Renouard, Julius Volz, and others.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
貴重なコメントと貢献はフレッド・ベイカー、オリヴィエ・ボナベンチャー、ベン・キャンベル、ロレンツォColitti、リンダ・ダンバー、ドナルドイーストレイク、ジョエルJaeggli、Gurudeep Kamat、ウォーレン・クマリ、ジュリアルヌアール、ジュリアスフォルツ、および他のユーザーによって行われました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.参考
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.1. Normative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.1。引用規格
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2460] Deering, S. and R. Hinden, &#34;Internet Protocol, Version 6 (IPv6) Specification&#34;, RFC 2460, December 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2460]デアリング、S.とR. Hindenと、 &#34;インターネットプロトコルバージョン6（IPv6）の仕様&#34;、RFC 2460、1998年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6434] Jankiewicz, E., Loughney, J., and T. Narten, &#34;IPv6 Node Requirements&#34;, RFC 6434, December 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6434] Jankiewicz、E.、Loughney、J.、およびT. Narten氏、 &#34;IPv6のノード要件&#34;、RFC 6434 2011年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6437] Amante, S., Carpenter, B., Jiang, S., and J. Rajahalme, &#34;IPv6 Flow Label Specification&#34;, RFC 6437, November 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6437] Amante、S.、大工、B.、江、S.、およびJ. Rajahalme、 &#34;IPv6のフローラベル仕様&#34;、RFC 6437、2011年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.2. Informative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.2。参考文献
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2991] Thaler, D. and C. Hopps, &#34;Multipath Issues in Unicast and Multicast Next-Hop Selection&#34;, RFC 2991, November 2000.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2991]ターラー、D.およびC. Hoppsが、 &#34;ユニキャストとマルチキャストの次ホップの選択におけるマルチパスの問題&#34;、RFC 2991、2000年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4864] Van de Velde, G., Hain, T., Droms, R., Carpenter, B., and E. Klein, &#34;Local Network Protection for IPv6&#34;, RFC 4864, May 2007.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4864]ヴァン・デ・ヴェルデ、G.、ハイン、T.、Droms、R.、大工、B.、およびE.クライン、 &#34;IPv6のローカルネットワークの保護&#34;、RFC 4864、2007年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6294] Hu, Q. and B. Carpenter, &#34;Survey of Proposed Use Cases for the IPv6 Flow Label&#34;, RFC 6294, June 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6294]胡、Q.及びB.大工、 &#34;IPv6のフローラベルのために提案された使用事例の調査&#34;、RFC 6294、2011年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6296] Wasserman, M. and F. Baker, &#34;IPv6-to-IPv6 Network Prefix Translation&#34;, RFC 6296, June 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6296]ワッサーマン、M.およびF.ベイカー、 &#34;IPv6の対IPv6ネットワークプレフィックス翻訳&#34;、RFC 6296、2011年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6436] Amante, S., Carpenter, B., and S. Jiang, &#34;Rationale for Update to the IPv6 Flow Label Specification&#34;, RFC 6436, November 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6436] Amante、S.、大工、B.、およびS.江、 &#34;IPv6のフローラベル仕様への更新のための理論的根拠&#34;、RFC 6436、2011年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6438] Carpenter, B. and S. Amante, &#34;Using the IPv6 Flow Label for Equal Cost Multipath Routing and Link Aggregation in Tunnels&#34;, RFC 6438, November 2011.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6438]大工、B.とS. Amante、「トンネル内イコールコストマルチパスルーティングおよびリンクアグリゲーションのためのIPv6フローラベルの使用」、RFC 6438、2011年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Tarreau] Tarreau, W., &#34;Making applications scalable with load balancing&#34;, 2006, &lt;http://1wt.eu/articles/2006_lb/&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Tarreau] Tarreau、W.、 &#34;ロード・バランシングとスケーラブルなアプリケーションを作る&#34;、2006年、&lt;http://1wt.eu/articles/2006_lb/&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
著者のアドレス
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Brian Carpenter Department of Computer Science University of Auckland PB 92019 Auckland 1142 New Zealand
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
オークランドPBのコンピュータサイエンス大学92019オークランド1142ニュージーランドのブライアン・カーペンター部門
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EMail: brian.e.carpenter@gmail.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メールアドレス：brian.e.carpenter@gmail.com
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Sheng Jiang Huawei Technologies Co., Ltd Q14, Huawei Campus No.156 Beiqing Road Hai-Dian District, Beijing 100095 P.R. China
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HU AはキャンパスNO.156は愛緑道H -Dイアン地区、北京100095中華人民共和国私もあるSが共同クロス江HU A技術である、株式会社Q14、
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EMail: jiangsheng@huawei.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メールアドレス：jiangsheng@huawei.com
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Willy Tarreau HAProxy Technologies, Inc. R&amp;D Network Products 3 rue du petit Robinson 78350 Jouy-en-Josas France
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ウィリーTarreau HAProxy Technologies社R＆Dネットワーク製品3 RUEデュ・プチ・ロビンソン78350ジュイ・アン・ジョザスフランス
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EMail: willy@haproxy.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メールアドレス：willy@haproxy.com
        </p>
      </div>
    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
